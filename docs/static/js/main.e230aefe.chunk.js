(this["webpackJsonppowereye-ui"]=this["webpackJsonppowereye-ui"]||[]).push([[0],{221:function(e,t,a){},291:function(e,t,a){},295:function(e,t,a){e.exports=a.p+"static/media/PowerEyeLogoAndText.4651b459.png"},297:function(e,t,a){e.exports=a.p+"static/media/chart-color-bg.dccfe1ee.png"},298:function(e,t,a){e.exports=a.p+"static/media/config-color-bg.92441e2f.png"},315:function(e,t,a){e.exports=a.p+"static/media/PowerEyeTextLogo.dce1d84b.png"},316:function(e,t,a){e.exports=a.p+"static/media/PowerEyeOnlyLogo.5f46b29e.png"},344:function(e,t,a){e.exports=a(585)},349:function(e,t,a){},350:function(e,t,a){},351:function(e,t,a){},379:function(e,t,a){},380:function(e,t,a){},410:function(e,t,a){},411:function(e,t,a){},412:function(e,t,a){},474:function(e,t,a){},479:function(e,t,a){},549:function(e,t,a){},550:function(e,t,a){},552:function(e,t,a){},566:function(e,t,a){},585:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(29),o=a.n(c),i=(a(349),a(350),a(589)),l=a(123),u=a(211),s=a(606),d=(a(351),a(295)),m=a.n(d),p=a(97),f=r.a.createElement(l.a,null,r.a.createElement(l.a.Item,{style:{cursor:"default"}},"nombre de usuario"),r.a.createElement(l.a.Divider,null),r.a.createElement(l.a.Item,null,r.a.createElement(p.b,{to:"/login"},"Log out"))),g=function(){return r.a.createElement("div",{className:"topbar"},r.a.createElement(p.b,{to:"/"},r.a.createElement("img",{src:m.a,className:"powereye-logo",alt:"logo"})),r.a.createElement(u.a,{placement:"bottomRight",trigger:["click"],overlay:f},r.a.createElement(s.a,{className:"user-icon"})))},E=a(599),b=a(596),h=a(588),v=a(145),y=a(90),x=(a(379),a(380),a(297)),O=a.n(x),j=a(298),S=a.n(j),w=E.a.Title,k=function(e){var t=e.title,a=e.image;return r.a.createElement(b.a,{hoverable:!0,className:"buttom-card"},r.a.createElement("img",{alt:t,src:"chart"===a?O.a:S.a,style:{marginBottom:"20px"}}),r.a.createElement(w,{style:{fontWeight:500},level:3},t))},P=E.a.Title,C=function(){return r.a.createElement("div",{className:"home"},r.a.createElement(b.a,{style:{width:"100%"},className:"title-card"},r.a.createElement(P,{style:{margin:0,fontWeight:500},level:2},"Power Eye")),r.a.createElement(h.a,null),r.a.createElement("div",{className:"button-group"},r.a.createElement(v.a,null,r.a.createElement(y.a,{span:12},r.a.createElement(p.b,{to:"/charts"},r.a.createElement(k,{image:"chart",title:"Estad\xedsticas"}))),r.a.createElement(y.a,{span:12},r.a.createElement(p.b,{to:"/config"},r.a.createElement(k,{image:"config",title:"Configurar mi vidriera"}))))))},I=i.a.Header,N=i.a.Content,T=function(){return r.a.createElement(i.a,null,r.a.createElement(I,null,r.a.createElement(g,null)),r.a.createElement(N,{className:"content"},r.a.createElement(C,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=a(58),V=a(18),D=(a(410),a(593)),A=a(590),M=(a(411),a(600)),R=(a(412),function(e){var t=e.initialStat,a=void 0===t?0:t,n=e.title,c=e.unit;return r.a.createElement(b.a,{className:"indicator-card"},r.a.createElement(M.a,{style:{width:"200px"},className:"stat",title:n,value:a.toFixed(0),valueStyle:{color:"#3f8600"},suffix:c}))}),L=a(41),W=a.n(L),B=a(61),Z=a(106),q=a(107),Y=a(142),z=a(140),H="",G=function(){function e(t){Object(Z.a)(this,e),t&&(H=t)}return Object(q.a)(e,[{key:"apiFetch",value:function(e){var t=e.method,a=e.path,n=e.body,r="".concat("http:","//").concat("52.67.203.88:8080").concat(H).concat(a),c={method:t,headers:{Accept:"application/json","Content-Type":"application/json",Host:"52.67.203.88:8080"}};return n&&(c.body=JSON.stringify(n)),fetch(r,c).then((function(e){return e})).then((function(e){return e.json()}))}},{key:"apiPost",value:function(e,t){return this.apiFetch({method:"POST",path:e,body:t})}},{key:"apiGet",value:function(e){return this.apiFetch({method:"GET",path:e,body:null})}}]),e}(),U=function(e){Object(Y.a)(a,e);var t=Object(z.a)(a);function a(){return Object(Z.a)(this,a),t.call(this,"/dashboard/estadisticas")}return Object(q.a)(a,[{key:"getPromedioVistasDiarias",value:function(){var e=Object(B.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiPost("/promedio",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPersonasDetuvieron",value:function(){var e=Object(B.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiPost("/personasDetuvieron",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPersonasQueIngresaron",value:function(){var e=Object(B.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiPost("/personasIngresaron",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTortaSexo",value:function(){var e=Object(B.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiPost("/graficoTortaSexo",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTortaRangoEtario",value:function(){var e=Object(B.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiPost("/graficoTortaRangoEtario",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLineaImpacto",value:function(){var e=Object(B.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiPost("/graficoLineaImpacto",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBarrasProductos",value:function(){var e=Object(B.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiPost("/graficoBarrasProductos",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(G),J=a(98),_=a.n(J),$=D.a.RangePicker,Q=E.a.Text,K=E.a.Title,X=function(e){var t=e.fechaInicial,a=e.dateFormat,c=e.onDateChange,o=e.filtro,i=Object(n.useState)(0),l=Object(V.a)(i,2),u=l[0],s=l[1],d=Object(n.useState)(0),m=Object(V.a)(d,2),p=m[0],f=m[1],g=Object(n.useState)(0),E=Object(V.a)(g,2),b=E[0],h=E[1];return console.log($.toString),Object(n.useEffect)((function(){var e=new U;e.getPromedioVistasDiarias(o).then((function(e){null!==e&&s(e)})).catch((function(e){console.log(e),s(0)})),e.getPersonasQueIngresaron(o).then((function(e){null!==e&&Number.isInteger(e)&&f(e)})).catch((function(e){console.log(e),f(0)})),e.getPersonasDetuvieron(o).then((function(e){null!==e&&Number.isInteger(e)&&h(e)})).catch((function(e){console.log(e),h(0)}))}),[o]),r.a.createElement("div",{className:"indicator-group"},r.a.createElement(K,null,"Estad\xedsticas"),r.a.createElement(A.a,null,r.a.createElement(Q,{strong:!0},"Seleccione un rango de fecha"),r.a.createElement($,{defaultValue:[_()(t.fechaInicio,a),_()(t.fechaFin,a)],format:a,onChange:c})),r.a.createElement("div",{className:"indicator-row"},r.a.createElement(R,{title:"Promedio de atenci\xf3n diario (segundos)",initialStat:u}),r.a.createElement(R,{title:"Personas que pasaron caminando",initialStat:b}),r.a.createElement(R,{title:"Personas que ingresaron al local",initialStat:p})))},ee=a(63),te=(a(221),a(139)),ae=function(e){Object(Y.a)(a,e);var t=Object(z.a)(a);function a(){return Object(Z.a)(this,a),t.call(this,"/dashboard/producto")}return Object(q.a)(a,[{key:"editProduct",value:function(){var e=Object(B.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiPost("/editar",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createProduct",value:function(){var e=Object(B.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiPost("/crear",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteProduct",value:function(){var e=Object(B.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiPost("/eliminar",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getProducts",value:function(){var e=Object(B.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiPost("/verProductos",0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"asingProductToShowcase",value:function(){var e=Object(B.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiPost("/asignar",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"desasignarDeVidriera",value:function(){var e=Object(B.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiPost("/sacarDeVidriera",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(G),ne=function(e){e.type;var t=e.description,a=e.filtro,c=Object(n.useState)([]),o=Object(V.a)(c,2),i=o[0],l=o[1],u=Object(n.useState)(null),s=Object(V.a)(u,2),d=s[0],m=s[1],p=[{label:"",value:0}];Object(n.useEffect)((function(){(new ae).getProducts().then((function(e){m(e.map((function(e){return{id:e.id,label:e.nombre}})))}))}),[]),Object(n.useEffect)((function(){var e=new U;console.log("filtro",a),e.getBarrasProductos(a).then((function(e){null!==e&&0!==e&&Array.isArray(e)&&l(e.map((function(e){if(null!=e.idProducto)return{label:d.find((function(t){return t.id===e.idProducto})).label,value:e.vistas}}))),0===e.length&&l(p)})).catch((function(e){console.log(e)}))}),[a]);var f={className:"chart",description:{visible:!!t,text:t},data:i,forceFit:!0,padding:"auto",xField:"label",yField:"value",yAxis:{label:{formatter:function(e){return"".concat(e).replace(/\d{1,3}(?=(\d{3})+$)/g,(function(e){return"".concat(e,",")}))}}},label:{visible:!0,position:"middle"},meta:{label:{alias:"Productos"},value:{alias:"Tiempo de atenci\xf3n"}},responsive:!0};return r.a.createElement(te.a,f)},re=function(e){var t=e.type,a=e.title,c=e.description,o=e.filtro,i=Object(n.useState)([]),l=Object(V.a)(i,2),u=l[0],s=l[1];Object(n.useEffect)((function(){var e=new U;"Sexo"===t&&e.getTortaSexo(o).then((function(e){if(null!==e){var t=[{date:"Masculino",value:e.cantM},{date:"Femenino",value:e.cantF}];s(t)}})).catch((function(e){console.log(e)})),"RangoEtario"===t&&e.getTortaRangoEtario(o).then((function(e){if(null!==e){var t=[{date:"Menores a 25 a\xf1os",value:e.rango0025},{date:"De 25 a 40 a\xf1os",value:e.rango2540},{date:"De 40 a 60 a\xf1os",value:e.rango4060},{date:"60 a\xf1os o m\xe1s",value:e.rango60up}];s(t)}})).catch((function(e){console.log(e)}))}),[o]);var d={className:"chart",title:{visible:!!a,text:a},description:{visible:!!c,text:c},data:u,forceFit:!0,padding:"auto",radius:.8,angleField:"value",colorField:"date",yAxis:{label:{formatter:function(e){return"".concat(e).replace(/\d{1,3}(?=(\d{3})+$)/g,(function(e){return"".concat(e,",")}))}}},label:{visible:!0,type:"outer",offset:20,formatter:function(e,t){return"".concat(t._origin.date,": ").concat(t._origin.value)}},responsive:!0};return r.a.createElement(te.c,d)},ce=new U,oe=function(e){var t=e.description,a=e.filtro,c=Object(n.useState)([]),o=Object(V.a)(c,2),i=o[0],l=o[1],u=[{date:"",type:"",value:0}];Object(n.useEffect)((function(){ce.getLineaImpacto(a).then((function(e){null===e&&0!==e.length||l(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return{date:e.fecha,type:"producto",value:e.vistas}}))}(e)),0===e.length&&l(u)})).catch((function(e){l([]),console.log(e)}))}),[a]);var s={className:"chart",description:{visible:!!t,text:t},data:i,responsive:!0,forceFit:!0,padding:"auto",xField:"date",yField:"value",yAxis:{label:{formatter:function(e){return"".concat(e).replace(/\d{1,3}(?=(\d{3})+$)/g,(function(e){return"".concat(e,",")}))}}},seriesField:"type",interactions:[{type:"slider",cfg:{start:0,end:1}}],color:["#1979C9","#D62A0D","#FAA219"]};return r.a.createElement(te.b,s)},ie=a(162),le=(a(474),ie.a.Option),ue=E.a.Title,se=function(e){e.onDateChange;var t=e.filtro,a=Object(n.useState)(null),c=Object(V.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)(Object(ee.a)(Object(ee.a)({},t),{},{producto:0})),u=Object(V.a)(l,2),s=u[0],d=u[1],m=Object(n.useState)(t),p=Object(V.a)(m,2),f=p[0],g=p[1],E=Object(n.useState)(t),h=Object(V.a)(E,2),v=h[0],y=h[1],x=Object(n.useState)(Object(ee.a)(Object(ee.a)({},t),{},{producto:0})),O=Object(V.a)(x,2),j=O[0],S=O[1],w=Object(n.useState)(null),k=Object(V.a)(w,2),P=k[0],C=k[1],I=Object(n.useState)(null),N=Object(V.a)(I,2),T=N[0],F=N[1],D=Object(n.useState)(""),A=Object(V.a)(D,2),M=A[0],R=A[1],L=Object(n.useState)(""),W=Object(V.a)(L,2),B=W[0],Z=W[1],q=Object(n.useState)(""),Y=Object(V.a)(q,2),z=Y[0],H=Y[1],G=Object(n.useState)(""),U=Object(V.a)(G,2),J=(U[0],U[1],Object(n.useState)(0)),_=Object(V.a)(J,2),$=_[0],Q=_[1];return Object(n.useEffect)((function(){(new ae).getProducts().then((function(e){i(e.map((function(e){return{id:e.id,label:e.nombre}})))}))}),[]),Object(n.useEffect)((function(){g(Object(ee.a)(Object(ee.a)({},t),{},{producto:P})),y(Object(ee.a)(Object(ee.a)({},t),{},{producto:T})),S(Object(ee.a)(Object(ee.a)({},t),{},{rango:B,sexo:M})),d(Object(ee.a)(Object(ee.a)({},t),{},{sexo:z,producto:$}))}),[t,P,T,M,B,z,$]),r.a.createElement("div",{className:"chart-group"},r.a.createElement(b.a,{style:{margin:"20px auto",maxWidth:"1250px"}},r.a.createElement(ue,{level:3},"Impacto por d\xeda"),r.a.createElement("div",{className:"filter-chart-group"},r.a.createElement(ie.a,{className:"filter-chart-group",placeholder:"Seleccionar producto",onChange:function(e){Q(e)}},r.a.createElement(le,{key:999,value:0},"Todos los Productos"),o&&o.map((function(e){return r.a.createElement(le,{key:e.id,value:e.id},e.label)}))),r.a.createElement(ie.a,{style:{margin:"20px auto",maxWidth:"400px"},placeholder:"Seleccionar sexo",onChange:function(e){H(e)}},r.a.createElement(le,{value:""},"Todos"),r.a.createElement(le,{value:"M"},"Masculino"),r.a.createElement(le,{value:"F"},"Femenino"))),r.a.createElement(oe,{filtro:s})),r.a.createElement(b.a,{style:{margin:"20px auto",maxWidth:"1250px"}},r.a.createElement(ue,{level:3},"Vistas totales por producto"),r.a.createElement("div",{className:"filter-chart-group"},r.a.createElement(ie.a,{style:{margin:"20px auto",maxWidth:"400px"},placeholder:"Seleccionar sexo",onChange:function(e){R(e)}},r.a.createElement(le,{value:""},"Todos"),r.a.createElement(le,{value:"M"},"Masculino"),r.a.createElement(le,{value:"F"},"Femenino")),r.a.createElement(ie.a,{style:{margin:"20px auto",maxWidth:"400px"},placeholder:"Seleccionar Rango etario",onChange:function(e){Z(e)}},r.a.createElement(le,{value:""},"Todos"),r.a.createElement(le,{value:"rango0025"},"Menores a 25 a\xf1os"),r.a.createElement(le,{value:"rango2540"},"De 25 a 40 a\xf1os"),r.a.createElement(le,{value:"rango4060"},"De 40 a 60 a\xf1os"),r.a.createElement(le,{value:"rango60up"},"60 a\xf1os o m\xe1s"))),r.a.createElement(ne,{filtro:j})),r.a.createElement(b.a,{className:"",style:{margin:"20px auto",maxWidth:"1250px"}},r.a.createElement(ue,{level:3},"Vistas por Rango Etario"),r.a.createElement(ie.a,{className:"filter-chart-group",placeholder:"Seleccionar producto",onChange:function(e){C(e)}},r.a.createElement(le,{key:999,value:null},"Todos los Productos"),o&&o.map((function(e){return r.a.createElement(le,{key:e.id,value:e.id},e.label)}))),r.a.createElement(re,{type:"RangoEtario",filtro:f})),r.a.createElement(b.a,{className:"",style:{margin:"20px auto",maxWidth:"1250px"}},r.a.createElement(ue,{level:3},"Vistas por Sexo"),r.a.createElement(ie.a,{className:"filter-chart-group",placeholder:"Seleccionar producto",onChange:function(e){F(e)}},r.a.createElement(le,{key:999,value:null},"Todos los Productos"),o&&o.map((function(e){return r.a.createElement(le,{key:e.id,value:e.id},e.label)}))),r.a.createElement(re,{type:"Sexo",filtro:v})))},de=i.a.Header,me=i.a.Content,pe={fechaInicio:"2020/10/15",fechaFin:"2020/11/27"},fe=(a(479),a(597)),ge=a(601),Ee=a(55),be=a(315),he=a.n(be),ve=a(316),ye=a.n(ve),xe=E.a.Text,Oe=(a(549),a(550),function(e){var t=e.onPageChange;return r.a.createElement("div",{className:"config-navigator"},r.a.createElement(Ee.a,{onClick:function(){t("showcase")},shape:"round",size:"large"},"Vidriera"),r.a.createElement(Ee.a,{onClick:function(){t("products")},shape:"round",size:"large"},"Productos"),r.a.createElement(Ee.a,{onClick:function(){t("priority")},shape:"round",size:"large"},"Prioridad"))}),je=(a(291),a(203)),Se=a(591),we=(E.a.Title,E.a.Text),ke=ie.a.Option,Pe=function(e){var t=e.index,a=e.text,c=e.options,o=void 0===c?[]:c,i=e.onProductChange,l=Object(n.useState)(a),u=Object(V.a)(l,2),s=u[0],d=u[1];Object(n.useEffect)((function(){var e=o.find((function(e){return e.idZonaVidriera===t}));d(e?e.label:"")}),[o]);var m=r.a.createElement("div",null,r.a.createElement(ie.a,{style:{width:"100%"},onChange:function(e,a){d(a.children),i(e,t)}},o.map((function(e){return r.a.createElement(ke,{key:e.id,value:e.id},e.label)}))));return r.a.createElement(Se.a,{placement:"bottom",title:"Seleccione un producto",content:m,trigger:"click"},r.a.createElement(b.a,{className:"sector-content",hoverable:!0,style:{height:"150px"}},r.a.createElement("span",{className:"fixed-index"},t),s?r.a.createElement(we,{className:"text-option"},s):r.a.createElement("span",null)))},Ce=a(607),Ie=E.a.Title,Ne=E.a.Text,Te=new ae,Fe=function(e){var t=Object(n.useState)([]),a=Object(V.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(!1),l=Object(V.a)(i,2),u=l[0],s=l[1];Object(n.useEffect)((function(){Te.getProducts().then((function(e){o(e.map((function(e){return{id:e.id,label:e.nombre,idZonaVidriera:e.idZonaVidriera}})))}))}),[]);for(var d=function(e,t){s(!0),Te.asingProductToShowcase({id:e,idZonaVidriera:t}).then((function(a){c&&c.filter((function(e){return e.idZonaVidriera===t})).forEach((function(e){return Te.desasignarDeVidriera({id:e.id,idZonaVidriera:e.idZonaVidriera})}));var n=c&&c.map((function(a){return a.idZonaVidriera===t&&a.id!==e&&(a.idZonaVidriera=null),a.id===e&&(a.idZonaVidriera=t),a}));o(n)})).finally((function(){return setTimeout((function(){return s(!1)}),1e3)}))},m=[],p=function(e){m.push(r.a.createElement(v.a,{gutter:[16,16]},[1,2,3].map((function(t,a){return r.a.createElement(y.a,{xs:24,sm:8,md:8,lg:8,xl:8},r.a.createElement(Pe,{options:c,index:3*e+(a+1),onProductChange:d}))}))))},f=0;f<3;f++)p(f);return r.a.createElement("div",{className:"showcase"},r.a.createElement("div",{style:{textAlign:"center",marginBottom:"25px"}},r.a.createElement(Ie,{level:3},"Mapeo de vidriera"),r.a.createElement(Ne,null,"Elige un producto por cada sector de tu vidriera seg\xfan se encuentren dispuestos en tu vidriera real.")),m,r.a.createElement("div",{style:{width:"250px",margin:"auto",marginTop:"25px"}},u?r.a.createElement("div",{className:"sync-state"},r.a.createElement(je.a,{className:"spin-icon"}),r.a.createElement(Ne,null,"Syncing")):r.a.createElement("div",{className:"sync-state"},r.a.createElement(Ce.a,{className:"success-icon"}),r.a.createElement(Ne,null,"Synced!"))))},Ve=a(251),De=a(604),Ae=a(77),Me=(a(552),a(603)),Re=a(553),Le=E.a.Text;function We(e,t,a){for(var n=0;n<t.length;n++)if(t[n][a]===e)return n;return-1}var Be=Object(Ve.b)((function(e){var t=e.value;return r.a.createElement(De.b.Item,null,r.a.createElement(Me.a,{style:{marginRight:"6px"}}),r.a.createElement(Le,null,t))})),Ze=Object(Ve.a)((function(e){var t=e.items;return r.a.createElement(b.a,{title:r.a.createElement(Ae.a,{title:"Lista ordenada de mayor prioridad a menor prioridad",color:"blue"},r.a.createElement(Le,{strong:!0},"Ordene seg\xfan prioridad"))},r.a.createElement(De.b,null,t.map((function(e,t){return r.a.createElement(Be,{key:e.id,index:t,value:e.label})}))))})),qe=function(e){return r.a.createElement(Ze,{items:e.items,onSortEnd:function(t){var a=t.oldIndex,n=t.newIndex;e.setItemsOrdenables(Re(e.items,a,n));var r=Re(e.items,a,n);e.setPrioridadConfig({rangoEtario:We("Rango etario",r,"label"),prioridadSexo:We("Sexo",r,"label"),cantVistas:We("Cantidad de vistas",r,"label")})}})},Ye=(a(566),a(210)),ze=E.a.Text,He=function(e){var t={display:"block",height:"45px",lineHeight:"30px"};return console.log(e.value),r.a.createElement(b.a,{title:r.a.createElement(ze,{strong:!0},"Selecciones qu\xe9 rango etario priorizar"),style:{border:"1px solid #d9d9d9"}},r.a.createElement(Ye.a.Group,{onChange:function(t){e.onChange(t.target.value)},value:e.value},r.a.createElement(Ye.a,{style:t,value:0},r.a.createElement(ze,{keyboard:!0},"0 - 25")),r.a.createElement(Ye.a,{style:t,value:1},r.a.createElement(ze,{keyboard:!0},"25 - 40")),r.a.createElement(Ye.a,{style:t,value:2},r.a.createElement(ze,{keyboard:!0},"40 - 60")),r.a.createElement(Ye.a,{style:t,value:3},r.a.createElement(ze,{keyboard:!0},"60 +"))))},Ge=E.a.Text,Ue=function(e){var t={display:"block",height:"45px",lineHeight:"40px"};return r.a.createElement(b.a,{title:r.a.createElement(Ge,{strong:!0},"Selecciones qu\xe9 sexo priorizar"),style:{border:"1px solid #d9d9d9"}},r.a.createElement(Ye.a.Group,{onChange:function(t){e.onChange(t.target.value)},value:e.value},r.a.createElement(Ye.a,{style:t,value:"M"},r.a.createElement(Ge,{keyboard:!0},"M")),r.a.createElement(Ye.a,{style:t,value:"F"},r.a.createElement(Ge,{keyboard:!0},"F"))))},Je=function(e){Object(Y.a)(a,e);var t=Object(z.a)(a);function a(){return Object(Z.a)(this,a),t.call(this,"/configuracionImpacto")}return Object(q.a)(a,[{key:"postPriority",value:function(){var e=Object(B.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiPost("/guardar",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){var e=Object(B.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiPost("/get",0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(G),_e=E.a.Title,$e=E.a.Text,Qe={HIGH:0,MEDIUM:1,MEDIUM_LOW:2,LOW:3},Ke={JOVENES:0,ADULTOS:1,ADULTOS_MAYORES:2,ANCIANOS:3},Xe=["0 a 25","25 a 40","40 a 60","60 +"],et=function(){var e=Object(n.useState)([]),t=Object(V.a)(e,2),a=(t[0],t[1],Object(n.useState)(0)),c=Object(V.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)(""),u=Object(V.a)(l,2),s=u[0],d=u[1],m=Object(n.useState)(0),p=Object(V.a)(m,2),f=p[0],g=p[1],E=Object(n.useState)([]),b=Object(V.a)(E,2),h=b[0],v=b[1];return Object(n.useEffect)((function(){(new Je).getConfig().then((function(e){if(e&&e.length>0){var t=[{label:"Cantidad de vistas",id:Qe[e[0].prioridadCantVistas]},{label:"Rango etario",id:Qe[e[0].prioridadRangoEtario]},{label:"Sexo",id:Qe[e[0].prioridadSexo]}];v(t.sort((function(e,t){return e.id-t.id}))),i(Ke[e[0].valorRangoEtario]),d(e[0].valorSexo)}}))}),[]),r.a.createElement("div",{className:""},r.a.createElement("div",{style:{textAlign:"center",marginBottom:"25px"}},r.a.createElement(_e,{level:3},"Prioridad de vistas"),r.a.createElement($e,null,"Configure la prioridad a la hora de calcular el impacto de una vista."),r.a.createElement("br",null),r.a.createElement($e,null,"A mayor prioridad de una catagor\xeda, mayor impacto tendr\xe1 una vista que cumpla con los criterios seleccionados."),r.a.createElement("br",null),r.a.createElement($e,{strong:!0},"Configuraci\xf3n actual: ",h.length>0?h[0].label:""," - ",Xe[o]," - ",s)),r.a.createElement("div",{className:"priority-content"},r.a.createElement(qe,{setPrioridadConfig:g,items:h,setItemsOrdenables:v}),r.a.createElement(He,{value:o,onChange:i}),r.a.createElement(Ue,{value:s,onChange:d})),r.a.createElement("br",null),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(Ee.a,{onClick:function(){!function(){var e=new Je,t={prioridadRangoEtario:f.rangoEtario,prioridadSexo:f.prioridadSexo,prioridadCantVistas:f.cantVistas,prioridadExpresion:Qe.LOW,valorSexo:s,valorRangoEtario:"".concat(o),valorExpresion:0};console.log(t),e.postPriority(t).then((function(e){})).catch((function(e){console.log(e)}))}()},type:"primary",style:{marginBottom:16}},"Guardar")))},tt=a(250),at=a(592),nt=a(594),rt=a(598),ct=a(595),ot=a(605),it=(ie.a.Option,function(e){var t=e.visible,a=e.onCreate,c=e.onCancel,o=fe.a.useForm(),i=Object(V.a)(o,1)[0],l=Object(n.useState)([]),u=Object(V.a)(l,2),s=u[0];u[1];var d={fileList:s,beforeUpload:function(e){e.type;return function(e,t){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){console.log(a.result);var e=JSON.stringify(a.result);localStorage.setItem("imagen",e),t(a.result)},a.onerror=function(e){console.log("Error: ",e)}}(e,(function(e){e})),"image/png"===e.type||"image/jpg"===e.type||"image/jpeg"===e.type}};return r.a.createElement(rt.a,{visible:t,title:"Crear nuevo producto",okText:"Crear",cancelText:"Cancelar",onCancel:c,onOk:function(){i.validateFields().then((function(e){i.resetFields(),a(e)})).catch((function(e){console.log("Validate Failed:",e)}))}},r.a.createElement(fe.a,{form:i,layout:"vertical",name:"form_in_modal",initialValues:{modifier:"public"}},r.a.createElement(fe.a.Item,{name:"nombre",label:"Nombre",rules:[{required:!0,message:"Ingrese nombre del producto"}]},r.a.createElement(ge.a,null)),r.a.createElement(fe.a.Item,{name:"imagen",label:"Imagen",rules:[{required:!1}]},r.a.createElement(ct.a,d,r.a.createElement(Ee.a,{icon:r.a.createElement(ot.a,null)},"Seleccionar imagen")))))}),lt=a(335),ut=a(602),st=function(e){var t=e.editing,a=e.dataIndex,n=e.title,c=e.inputType,o=(e.record,e.index,e.children),i=Object(lt.a)(e,["editing","dataIndex","title","inputType","record","index","children"]),l="number"===c?r.a.createElement(ut.a,null):r.a.createElement(ge.a,null);return r.a.createElement("td",i,t?r.a.createElement(fe.a.Item,{name:a,style:{margin:0},rules:[{required:"sector"!==a&&"multimedia"!==a,message:"Ingrese ".concat(n,"!")}]},l):o)},dt=function(){var e=fe.a.useForm(),t=Object(V.a)(e,1)[0],a=Object(n.useState)([]),c=Object(V.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)(""),u=Object(V.a)(l,2),s=u[0],d=u[1],m=Object(n.useState)(!1),p=Object(V.a)(m,2),f=p[0],g=p[1],E=function(e){return e.key===s},b=new ae;Object(n.useEffect)((function(){b.getProducts().then((function(e){i(e.map((function(e){return{key:e.id,nombre:e.nombre,prioridad:e.prioridad,multimedia:r.a.createElement(Ce.a,{style:{color:"green"}}),sector:e.idZonaVidriera}})))}))}),[]);var h=function(){d("")},v=function(){var e=Object(B.a)(W.a.mark((function e(a){var n,r,c,l,u;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.validateFields();case 3:n=e.sent,r=Object(tt.a)(o),(c=r.findIndex((function(e){return a===e.key})))>-1?(l=r[c],r.splice(c,1,Object(ee.a)(Object(ee.a)({},l),n)),u={id:a,nombre:r[c].nombre,prioridad:r[c].prioridad},b.editProduct(u).then((function(e){i(r)})),d("")):(r.push(n),i(r),d("")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Validate Failed:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),y=[{title:"Nombre",dataIndex:"nombre",width:"30%",editable:!0},{title:"Sector",dataIndex:"sector",editable:!1,render:function(e,t){return e||r.a.createElement("span",{style:{color:"grey",fontStyle:"italic",fontSize:"10px"}},"Editable desde vidriera")}},{title:"Multimedia",dataIndex:"multimedia",editable:!1},{title:"Acciones",dataIndex:"acciones",render:function(e,a){return E(a)?r.a.createElement(A.a,{size:"middle"},r.a.createElement("a",{href:"javascript:;",onClick:function(){return v(a.key)},style:{marginRight:8}},"Guardar"),r.a.createElement("a",{onClick:h},"Cancel")):r.a.createElement(A.a,{size:"middle"},r.a.createElement("a",{onClick:function(){return function(e){t.setFieldsValue(Object(ee.a)({},e)),d(e.key)}(a)}},"Editar"),r.a.createElement(at.a,{title:"Seguro desea eliminar?",cancelText:"Cancelar",onConfirm:function(){return function(e){var t=o.findIndex((function(t){return e===t.key})),a={id:e,nombre:o[t].nombre};b.deleteProduct(a).then((function(t){i(o.filter((function(t){return t.key!==e})))}))}(a.key)}},r.a.createElement("a",null,"Eliminar")))}}].map((function(e){return e.editable?Object(ee.a)(Object(ee.a)({},e),{},{onCell:function(t){return{record:t,inputType:"prioridad"===e.dataIndex?"number":"text",dataIndex:e.dataIndex,title:e.title,editing:E(t)}}}):e}));return r.a.createElement(fe.a,{form:t,component:!1},r.a.createElement(Ee.a,{onClick:function(){g(!0)},type:"primary",style:{marginBottom:16}},"Agregar producto"),r.a.createElement(it,{visible:f,onCreate:function(e){var t=JSON.parse(localStorage.getItem("imagen")),a={nombre:e.nombre,prioridad:0,imagen:t.split(",")[1]};b.createProduct(a).then((function(e){0!==e&&i([].concat(Object(tt.a)(o),[{nombre:a.nombre,prioridad:a.prioridad,key:e}]))})).catch((function(e){console.log(e)})),g(!1)},onCancel:function(){g(!1)}}),r.a.createElement(nt.a,{components:{body:{cell:st}},bordered:!0,dataSource:o,columns:y,rowClassName:"editable-row",pagination:{onChange:h}}))},mt=E.a.Title,pt=E.a.Text,ft=function(){return r.a.createElement("div",{className:"showcase"},r.a.createElement("div",{style:{textAlign:"center",marginBottom:"25px"}},r.a.createElement(mt,{level:3},"Productos"),r.a.createElement(pt,null,"Edita y agrega nuevos productos para luego posicionarlos en vidriera.")),r.a.createElement("div",null,r.a.createElement(dt,null)))},gt=i.a.Header,Et=i.a.Content,bt="priority",ht="products",vt="showcase",yt="sellers",xt=r.a.createElement(p.a,null,r.a.createElement("div",null,r.a.createElement(F.a,{exact:!0,path:"/",component:T}),r.a.createElement(F.a,{path:"/login",component:function(){return r.a.createElement("div",{className:"login-page"},r.a.createElement("img",{src:ye.a,alt:"Power Eye",width:"300px",className:"only-logo"}),r.a.createElement(b.a,{className:"form-box"},r.a.createElement(fe.a,{name:"basic",onFinish:function(e){console.log("Success:",e)},onFinishFailed:function(e){console.log("Failed:",e)}},r.a.createElement(fe.a.Item,{style:{textAlign:"center",marginBottom:"25px"}},r.a.createElement("img",{src:he.a,alt:"Power Eye",width:"200px"})),r.a.createElement(fe.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}]},r.a.createElement(ge.a,null)),r.a.createElement(fe.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(ge.a.Password,null)),r.a.createElement(fe.a.Item,{style:{cursor:"pointer",textAlign:"right"}},r.a.createElement(xe,{type:"secondary"},"\xbfOlvidaste tu contrase\xf1a?")),r.a.createElement(fe.a.Item,{style:{textAlign:"center",marginTop:"25px"}},r.a.createElement(p.b,{to:"/"},r.a.createElement(Ee.a,{style:{width:"100%"},type:"primary",htmlType:"submit"},"Iniciar sesi\xf3n"))))))}}),r.a.createElement(F.a,{path:"/charts",component:function(){var e=Object(n.useState)(pe),t=Object(V.a)(e,2),a=t[0],c=t[1];return r.a.createElement(i.a,null,r.a.createElement(de,null,r.a.createElement(g,null)),r.a.createElement(me,{className:"charts-page"},r.a.createElement(X,{dateFormat:"YYYY/MM/DD",onDateChange:function(e){var t=e.filter((function(e){return e.isValid})).map((function(e){return e.format("YYYY/MM/DD")}));t.length>0&&c({fechaInicio:t[0],fechaFin:t[1]})},fechaInicial:pe,filtro:a}),r.a.createElement(h.a,null),r.a.createElement(se,{filtro:a,onFilterChange:c})))}}),r.a.createElement(F.a,{path:"/config",component:function(){var e=Object(n.useState)(vt),t=Object(V.a)(e,2),a=t[0],c=t[1];return r.a.createElement(i.a,null,r.a.createElement(gt,null,r.a.createElement(g,null)),r.a.createElement(Et,{className:"config-page"},r.a.createElement(Oe,{onPageChange:function(e){c(e)}}),r.a.createElement(h.a,null),a===bt?r.a.createElement(et,null):a===ht?r.a.createElement(ft,null):a===vt||a===yt?r.a.createElement(Fe,null):r.a.createElement("div",null)))}})));o.a.render(r.a.createElement("div",null,xt),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[344,1,2]]]);
//# sourceMappingURL=main.e230aefe.chunk.js.map